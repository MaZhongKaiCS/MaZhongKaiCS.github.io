(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{440:function(v,_,t){v.exports=t.p+"assets/img/cicd.11c7cc0e.png"},441:function(v,_,t){v.exports=t.p+"assets/img/cicd2.f8410aff.png"},468:function(v,_,t){"use strict";t.r(_);var l=t(2),c=Object(l.a)({},(function(){var v=this,_=v.$createElement,l=v._self._c||_;return l("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[l("h2",{attrs:{id:"_2021-11-22"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_2021-11-22"}},[v._v("#")]),v._v(" 2021.11.22")]),v._v(" "),l("h3",{attrs:{id:"electron-pc如何持续集成"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#electron-pc如何持续集成"}},[v._v("#")]),v._v(" electron-pc如何持续集成")]),v._v(" "),l("p",[v._v("参考文章：https://www.yuque.com/docs/share/76060fe5-8cc0-419b-ae63-a8e3cf63325c")]),v._v(" "),l("ol",[l("li",[l("p",[v._v("electron是什么")]),v._v(" "),l("p",[v._v("是一个构建桌面端应用的框架")])]),v._v(" "),l("li",[l("p",[v._v("electron使用的语言")]),v._v(" "),l("p",[v._v("通过使用JavaScript、html、css来构建应用")])]),v._v(" "),l("li",[l("p",[v._v("electron有哪些技术组成")]),v._v(" "),l("p",[v._v("由node.js、chromium、封装好的系统API三大部分组成")])]),v._v(" "),l("li",[l("p",[v._v("electron可以实现跨平台吗")]),v._v(" "),l("p",[v._v("可以通过打包后在macOS、windows，Linux上运行")])])]),v._v(" "),l("p",[v._v("使用的是electron-builder会根据打包的平台来构建相应的版本，也就是在Windows会构建Windows版本的包，macOS会构建mac版本的包。")]),v._v(" "),l("h4",{attrs:{id:"pc端构建的困扰"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#pc端构建的困扰"}},[v._v("#")]),v._v(" pc端构建的困扰")]),v._v(" "),l("ul",[l("li",[v._v("一般开发者会根据自己的喜好来选择系统开发，所以只能打特定平台的包")]),v._v(" "),l("li",[v._v("打包的过程需要在本地机器上进行，打包持续时间长，影响其他开发工作")]),v._v(" "),l("li",[v._v("打包完成之后，包在本地目录，需要手动拷贝给其他人（测试），比较繁琐")])]),v._v(" "),l("h4",{attrs:{id:"解决方案"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[v._v("#")]),v._v(" 解决方案：")]),v._v(" "),l("ul",[l("li",[v._v("抹平平台的差异性，不管是Windows或者是mac，执行相同命令就可以打出Windows和mac的包")]),v._v(" "),l("li",[v._v("执行远程机器构建，开发人员本地只需要push触发")]),v._v(" "),l("li",[v._v("构建完成之后，将包通过邮件的方式发送给相关人员，自行取用")])]),v._v(" "),l("h4",{attrs:{id:"持续集成-ci-cd"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#持续集成-ci-cd"}},[v._v("#")]),v._v(" 持续集成（CI/CD）")]),v._v(" "),l("p",[v._v("持续集成包含持续集成、持续交付，持续：频繁发布，可重复，自动化流程，快速迭代。")]),v._v(" "),l("p",[v._v("准备：gitlab-runner、shell（命令语言）、.gitlab-cli.yml")]),v._v(" "),l("p",[l("strong",[v._v("gitlab-runner是一个执行器（程序执行器），shell具体执行任务，.gitlab-cli.yml表达是执行说明书")])]),v._v(" "),l("p",[v._v("流程：")]),v._v(" "),l("p",[l("img",{attrs:{src:t(440),alt:"cicd"}})]),v._v(" "),l("ol",[l("li",[l("p",[v._v("部署服务器（安装gitlab-runner，注册，启动）")]),v._v(" "),l("p",[v._v("gitlab-runner安装参考：https://docs.gitlab.com/runner/install/osx.html")])]),v._v(" "),l("li",[l("p",[v._v("配置.gitlab-cli.yml文件")])]),v._v(" "),l("li",[l("p",[v._v("编写shell脚本")])]),v._v(" "),l("li",[l("p",[v._v("测试流程，解决问题")])])]),v._v(" "),l("p",[v._v("打包持续集成的整体流程：")]),v._v(" "),l("p",[l("img",{attrs:{src:t(441),alt:"cicd2"}})]),v._v(" "),l("p",[v._v("electron mac部署流程：")]),v._v(" "),l("ol",[l("li",[l("p",[v._v("打包")]),v._v(" "),l("p",[v._v("一般分两种环境：sit测试环境，pro生产环境")]),v._v(" "),l("p",[v._v("以mac为例子，打包输出后是dmg文件")])]),v._v(" "),l("li",[l("p",[v._v("上传服务器")]),v._v(" "),l("p",[v._v("安装包会偏大，所以需要先压缩后上传。使用deeply-cli-service进行构建和上传。")]),v._v(" "),l("p",[v._v("上传之前，压缩；上传之后，解压，然后发送邮件。")])]),v._v(" "),l("li",[l("p",[v._v("邮件分发下载地址")]),v._v(" "),l("p",[v._v("邮件内容是在 depoly.config.js中配置的，然后需要配置nginx（启用索引功能，并且显示 文件的创建时间 和 文件的大小）")]),v._v(" "),l("p",[v._v("开发者 测试 产品经理 点击链接，浏览器进行下载操作，可以获得最新构建的包，提高开发测试验收协作效率。")])]),v._v(" "),l("li",[l("p",[v._v("版本更新发布")]),v._v(" "),l("p",[v._v("启动登录之后，会进行版本的判断，若在可升级范围之内，则会弹窗提示。")])])])])}),[],!1,null,null,null);_.default=c.exports}}]);