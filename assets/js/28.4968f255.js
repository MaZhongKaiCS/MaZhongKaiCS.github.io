(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{473:function(v,_,a){"use strict";a.r(_);var t=a(2),e=Object(t.a)({},(function(){var v=this,_=v.$createElement,a=v._self._c||_;return a("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[a("h3",{attrs:{id:"实现一个自由拖拽的组件-可应用于低代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现一个自由拖拽的组件-可应用于低代码"}},[v._v("#")]),v._v(" 实现一个自由拖拽的组件（可应用于低代码）")]),v._v(" "),a("p",[v._v("参考：https://mp.weixin.qq.com/s/vz9CRQaCXsQfl2JLn1sn5g")]),v._v(" "),a("h4",{attrs:{id:"核心"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心"}},[v._v("#")]),v._v(" 核心")]),v._v(" "),a("p",[v._v("实现组件自由拖拽的核心就是html5中的 draggable 属性，该属性规定了元素是否可以进行拖动，属性值如下：")]),v._v(" "),a("ul",[a("li",[v._v("true：规定元素可拖动")]),v._v(" "),a("li",[v._v("false：规定元素不可拖动")]),v._v(" "),a("li",[v._v("auto：使用浏览器的默认行为")])]),v._v(" "),a("p",[v._v("设置之后，组件只是可被拖动。")]),v._v(" "),a("h4",{attrs:{id:"拖动事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拖动事件"}},[v._v("#")]),v._v(" 拖动事件")]),v._v(" "),a("p",[v._v("拖动事件分为两类：")]),v._v(" "),a("ol",[a("li",[v._v("拖动元素可以触发的：\n"),a("ul",[a("li",[v._v("dragstart：鼠标点中元素并且开始移动时触发")]),v._v(" "),a("li",[v._v("drag：拖拽过程中持续触发")]),v._v(" "),a("li",[v._v("dragend：拖拽结束松开鼠标时触发")])])]),v._v(" "),a("li",[v._v("当拖拽元素到某个目标元素时，触发\n"),a("ul",[a("li",[v._v("dragenter：拖拽元素到目标元素时触发")]),v._v(" "),a("li",[v._v("dragover：拖动元素在目标元素中，持续触发")]),v._v(" "),a("li",[v._v("dragleave：离开目标元素时触发")]),v._v(" "),a("li",[v._v("drop：拖放元素到了目标元素中松开鼠标时触发")])])])]),v._v(" "),a("h4",{attrs:{id:"拖动放置行为"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拖动放置行为"}},[v._v("#")]),v._v(" 拖动放置行为")]),v._v(" "),a("p",[v._v("在拖动事件中，我们会获取到拖动的事件对象（e），在拖动对象中我们能够得到一个重要的属性 dataTransfer ，我们可以通过 dataTransfer 的 dropEffect 属性控制被拖动的元素的放置行为")]),v._v(" "),a("ul",[a("li",[v._v("none：不能把元素放置在这")]),v._v(" "),a("li",[v._v("move：移动到目标")]),v._v(" "),a("li",[v._v("copy：复制目标")]),v._v(" "),a("li",[v._v("link：目标打开拖动元素（拖动元素必须是链接并且有URL）")])]),v._v(" "),a("p",[v._v("为每个组件设置一下 "),a("code",[v._v("dragstart")]),v._v(" 事件，在该事件中我们需要做如下处理：")]),v._v(" "),a("ol",[a("li",[v._v("设置拖动元素的放置行为为"),a("code",[v._v("移动")]),v._v("，即"),a("code",[v._v("move")]),v._v("。")]),v._v(" "),a("li",[v._v("组件在目标元素经过时，必须要阻止默认行为，否则不能触发"),a("code",[v._v("drop")]),v._v("。")]),v._v(" "),a("li",[v._v("设置组件离开目标元素时放置行为为"),a("code",[v._v("不能拖放")]),v._v("，即"),a("code",[v._v("none")]),v._v("。")]),v._v(" "),a("li",[v._v("拖动元素在目标元素松手时添加元素到画布，即将组件元数据添加到"),a("code",[v._v("list2")]),v._v("中，元素所对应的元数据记录也了这个组件在画面中的坐标位置。")])]),v._v(" "),a("p",[v._v("然后在"),a("code",[v._v("dragend")]),v._v("事件中取听以上动作。")]),v._v(" "),a("p",[v._v("链接中有具体的案例实现拖拽.......")])])}),[],!1,null,null,null);_.default=e.exports}}]);